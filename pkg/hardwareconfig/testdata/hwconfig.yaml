apiVersion: ptp.openshift.io/v2alpha1
kind: HardwareConfig
metadata:
  name: test
  namespace: openshift-ptp
spec:
  profile:
    clockChain:
      behavior:
        conditions:
        - desiredStates:
          - sysfs:
              path: /sys/class/net/{interface}/device/ptp/ptp*/pins/SMA2
              value: "2 2"
              sourceName: PTP
          - sysfs:
              path: /sys/class/net/{interface}/device/ptp/ptp*/period
              value: "2 0 0 1 0"
              sourceName: PTP 
          - dpll:
              boardLabel: GNSS-1PPS
              clockId: Leader
              eec:
                priority: 255
              pps:
                priority: 255
          - dpll:
              boardLabel: GNSS-1PPS
              clockId: Follower
              eec:
                priority: 255
              pps:
                priority: 255
          - dpll:
              boardLabel: CVL-SDP20
              clockId: Leader
              eec:
                priority: 255
              pps:
                priority: 255
          - dpll:
              boardLabel: CVL-SDP21
              clockId: Leader
              eec:
                state: disconnected
              pps:
                state: disconnected
          name: Initialize T-BC
          sources:
          - conditionType: init
            sourceName: PTP
        - desiredStates:
          - dpll:
              boardLabel: CVL-SDP22
              clockId: Leader
              eec:
                priority: 255
              pps:
                priority: 0
          - dpll:
              boardLabel: CVL-SDP23
              clockId: Leader
              eec:
                state: disconnected
              pps:
                state: disconnected
          name: PTP Source Active
          sources:
          - conditionType: locked
            sourceName: PTP
        - desiredStates:
          - dpll:
              boardLabel: CVL-SDP22
              clockId: Leader
              eec:
                priority: 255
              pps:
                priority: 255
          - dpll:
              boardLabel: CVL-SDP23
              clockId: Leader
              eec:
                state: connected
              pps:
                state: connected
          name: PTP Source Lost - Leader Holdover
          sources:
          - conditionType: lost
            sourceName: PTP
        sources:
        - boardLabel: CVL-SDP22
          clockId: Leader
          name: PTP
          ptpTimeReceivers:
          - ens4f1
          sourceType: ptpTimeReceiver
      commonDefinitions:
        eSyncDefinitions:
        - name: esync-10-1
          eSyncConfig:
            transferFrequency: 10000000
            embeddedSyncFrequency: 1
            dutyCyclePct: 25
        clockIdentifiers:
        - alias: Leader
          clockId: "0x507c6fffff1fb1b8"
        - alias: Follower
          clockId: "0x507c6fffff1fb580"
      structure:
      - dpll:
          clockId: Leader
          holdoverParameters:
            maxInSpecOffset: 20
            localMaxHoldoverOffset: 30
            localHoldoverTimeout: 288
          phaseInputs:
            CVL_SDP22:
              description: PTP time receiver input
              frequency: 1
          phaseOutputs:
            REF-SMA1:
              connector: SMA1
              description: Output to the follower
              eSyncConfigName: esync-10-1
        ethernet:
        - ports:
          - ens4f0
          - ens4f1
        hardwareSpecificDefinitions: intel/e810
        name: TBC WPC leader
      - dpll:
          clockId: Follower
          phaseInputs:
            SMA1:
              connector: SMA1 
              eSyncConfigName: esync-10-1
              description: Input from the leader
        ethernet:
        - ports:
          - ens8f0
        hardwareSpecificDefinitions: intel/e810
        name: WPC follower through SMA1 from SMA1
    name: tbc
  relatedPtpProfileName: 01-tbc-tr
